
Оглавление	
Оглавление	1
Функциональные требования	2
1	Функциональный модуль "Администратор"	2
2	Функциональный модуль "Клиент"	4
3	Функциональный модуль "Инструктор"	14
4	Функциональный модуль "Тренер"	15
5	Функциональный модуль "Менеджер"	16
6	Каталоги (Catalogs)	16



Функциональные требования
1 Функциональный модуль "Администратор"
1.1  Дашборд "Администратор"
Обозначение: AdminDashboard.
Заголовок: "Администратор".
Меню дашборда:
• Главное. Экран дашборда.
• Профиль. Экран с личной информацией.
• Подменю каталогов. Доступны для создания/редактирования записей всех каталогов.
• Параметры -> Настройки. Открывается popup-форма "Настройки".
• Инфо.
Дашборд включает ListView пользователей с панелью инструментов. На панели инструментов находятся кнопки: "Создать" (активная), "Изменить", " Архивировать", "Сброс пароля" (активные при выборе строки в списке). Так же имеется поле поиска по ФИО/телефону/e-mail и кнопкой сброса содержимого поля. На каждое действие определяется своя команда.
Отдельно размещен виджет SegmentedButton со значениями: Все | Администраторы | Менеджеры | Тренеры | Инструкторы | Клиенты. При клике вызывается соответствующая команда фильтрации списка.

1.1.1 Экран "Создание пользователя"
Параметр: строка (userRole).
Заголовок: "Создание: " + userRole.
Поля:
• login (string). //Логин. Обязательное.
• password (string). //Пароль. Обязательное.
• lastName (string). //Фамилия. Обязательное.
• firstName (string). //Имя. Обязательное.
• middleName (string). //Отчество. Не обязательное.
• fullName (string). //Полное ФИО.
• shortName (string). //Краткое ФИО.
• gender (string). //Пол. Обязательное.
• age (int). //Возраст. Обязательное.
• phone (string). //Телефон. Обязательное.
• email (string). //E-mail. Не обязательное.
• photo (URL). //Фото. Не обязательное
• sendNotification (bool). //Посылать уведомления. Обязательное. Значение берется из файла настроек.
• hourNotification (duration). //Время уведомления до занятий (в часах). Обязательное. Значение берется из файла настроек.

В случае создания администратора, поля sendNotification, hourNotification, не отображаются.
В случае создания клиента, отображаются дополнительные поля:
• trackCalories (bool) //Учет калорий. Значение берется из файла настроек.
• double coeffActivity = 1.2; //Минимальный коэффициент активности.

Поле "Пароль" имеет отображаемый формат в виде звездочек.
Поля fullName и shortName вычисляются автоматически после ввода lastName, firstName, middleName.
Для выбора пола сформировать выпадающий список со значениями "мужской", "женский".
Телефон и почту проверять функциями валидации.

Кнопки: "Генерировать пароль", "Создать", "Отмена".
По кнопке "Генерировать пароль", запускается команда генерации пароля с солью в поле Пароль.
По кнопке "Создать", запускается команда создания пользователя с параметром userRole.
По кнопке "Отмена" закрывает окно.

1.1.2 Экран "Сброс пароля"
Параметр: строка (userLogin).
Лэйбл: "При сбросе пароля будет установлен новый пароль, который нужно будет сообщить пользователю. Продолжить?"
Поле: "Пароль".
Кнопки: "Сбросить пароль" и "Отменить".
Должно быть предусмотрено скрытие пароля. Должен быть предусмотрен ручной ввод пароля. Должна быть предусмотрена повторная генерация пароля.
При открытии формы запускается Команда "Генерация пароля" и возвращаемое значение подставляется в поле "Пароль".
При нажатии на кнопку "Сбросить пароль" запускается Команда "Сохранение пароля " с параметрами: userLogin и паролем.

1.1.3 Экран "Дежурства сотрудников"
Фрейм "Дежурный менеджер"
Содержит элементы:
• ФИО дежурного менеджера; //Статус "дежурный" определяется по последней незавершенной записи в employees_duty (где duty_finish_at IS NULL)'
• Дежурство с: ' + время последней записи duty_start_at из таблицы employees_duty по id из таблицы users;  
• ListView пользователей, отфильтрованных по роли Менеджер. 
• Кнопка с заголовком "Назначить", если ФИО пусто, или с заголовком "Сменить", если ФИО не пусто.
Логика: После выбора строки из ListView, и нажатия кнопки, запускается команда назначения дежурного сотрудника с параметрами: типа роли и id сотрудника. У нее есть 2 варианта:
1. id == null. В этом случае выдается предупреждающее сообщение "Назначить имярек дежурным менеджером?" В случае "Да" в таблице employees_duty создается новая запись с текущем временем в поле duty_start_at. На выходе команды заполняется поле ФИО и 'Дежурство с: ' + время duty_start_at;
2. id != null. В этом случае выдается предупреждающее сообщение "Сменить дежурного менеджера имярек1 на имярек2?" В случае "Да" в таблице employees_duty по id менеджера1 устанавливается текущем временем поле duty_finish_at. Далее создается новая запись с текущем временем в поле duty_start_at.  На выходе команды заполняется поле ФИО и 'Дежурство с: ' + время dutyManagerStartAt;

1.1.4 Экран "Настройки"
Имеет поля из файла настроек.
Кнопка: "Сохранить". Становится доступной при изменении любого поля окна.
1.1.5 Экран "Расписание работы центра"
Содержит редактируемую ListView из таблицы work_schedules.

1.1.6 Экран "Расписание занятий"
Содержит все виды расписаний занятий, с выборкой по тренеру, инструктору, клиенту.
Содержит функционал составления общего расписания, обновления по клиенту.

1.1.7 Экран "Табели"
Экран содержит дашборд "Табель" в групповом режиме.

2 Функциональный модуль "Клиент"
2.1 Таблицы индивидуальных назначений
• Таблица: client_training_plans
o id (PK)
o user_id (FK -> users)
o training_plan_template_id (FK -> training_plan_templates) // Исходный шаблон
o assigned_by (FK -> users) // Кто назначил (тренер)
o assigned_at (TIMESTAMP)
o is_active (BOOLEAN) // Активный план у клиента
o goal (VARCHAR) // Цель может быть переопределена для этого клиента
o notes (TEXT) // Персональные заметки тренера
• Таблица: client_set_exercises
o id (PK)
o client_training_plan_id (FK -> client_training_plans) // Часть какого ИНДИВИДУАЛЬНОГО плана
o set_exercise_template_id (FK -> set_exercise_templates) // Основано на каком шаблоне
o order (INT) // Порядок в плане для этого клиента
o is_active (BOOLEAN)
o repeats (INT) // Индивидуальное кол-во повторений всего сета
o rest_after_set (REAL) // Индивидуальное время отдыха после сета
• Таблица: client_exercises
o id (PK)
o client_set_exercise_id (FK -> client_set_exercises) // Часть какого ИНДИВИДУАЛЬНОГО сета
o exercise_template_id (FK -> exercise_templates) // Основано на каком шаблоне
o order (INT) // Порядок в сете для этого клиента
o custom_repeat_qty (INT) // Индивидуальное кол-во повторов
o custom_duration_exec (REAL) // Индивидуальная длительность
o custom_duration_rest (REAL) // Индивидуальный отдых
o custom_notes (TEXT) // Персональные указания (например, "ставить ноги шире")
2.2 Таблица "lessons"

• schedule_id (BIGINT); //определяет запланированный слот,
• client_training_plan_id (BIGINT); //конкретный план, который был выполнен в этом слоте
• set_exercises_id (BIGINT);
• user_id (BIGINT);
• instructor_id (BIGINT);
• trainer_id (BIGINT);
• room_id BIGINT REFERENCES rooms(id);
• equipment_ids JSONB; -- список equipment.id
• start_plan_at (TIMESTAMP);
• start_fact_at (TIMESTAMP);
• finish_plan_at (TIMESTAMP);
• finish_fact_at (TIMESTAMP);
• complete (INT);
• note (VARCHAR(100));
Таблица lessons заполняется на основе расписания.

Таблица "track_сalories"
• user_id (BIGINT);
• lesson_id (BIGINT);
• weight (double); //вес
• calories_in (REAL); //входящие калории
• calories_out (REAL); //исходящие калории

Таблица хранения формулы расчета BMR "bmr_formulas"
• name (VARCHAR(100));
• formula (TEXT), -- например: "66 + (13.7 * weight) + (5 * height) - (6.8 * age)"
• for_men (BOOLEAN),
• for_women (BOOLEAN),
• is_active (BOOLEAN DEFAULT true)


2.3 Таблицы антропометрии
Таблица "anthropometry_fix" (фиксированные значения, вводятся 1 раз).
• user_id (BIGINT);
• date_time (TIMESTAMP);
• height (int); //рост в см
• wrist_circ (Обхват запястья, см);
• ankle_circ (Обхват лодыжки, см);
Таблица "anthropometry_start" (антропология начало).
• user_id (BIGINT);
• date_time (TIMESTAMP);
• photo_date_time (TIMESTAMP);
• photo (URL); //фото 
• weight (double); //вес в кг
• shoulders_circ (int); //обхват в плечах
• breast_circ (int); //обхват в груди
• waist_circ (int); //обхват в талии
• hips_circ (int); //обхват бедер

Таблица "anthropometry_finish" " (антропология окончание). По структуре повторяет таблицу "anthropometry_start".
Таблицы anthropometry_ обновлять могут только сотрудники (не роль Клиент).

2.4 Таблицы биоимпеданса
Таблица "bioimpedance_start"
• user_id (BIGINT);
• date_time (TIMESTAMP);
• fat_percentage (Процент жира);
• muscle_mass (Мышечная масса, кг);
• water_percentage (Процент воды);
• visceral_fat (Висцеральный жир, уровень);
• bmc (Минеральная масса костей);
• bmi (Индекс массы тела, часто считает сам аппарат);
• metabolism (Скорость основного обмена, ккал);

Таблица "bioimpedance_finish". По структуре повторяет таблицу "bioimpedance_start".
Таблицы bioimpedance_ обновлять могут только сотрудники (не роль Клиент).

2.5 Таблица предпочтений
Таблица "client_schedule_preferences" (предпочтения клиента по расписанию).
• user_id (FK -> users). Ссылка на клиента.
• day_of_week (Integer, NOT NULL). День недели: 1-7.
• preferred_start_time (Time, NOT NULL). Желаемое время начала занятия.
• preferred_end_time (Time, NOT NULL). Желаемое время окончания занятия.

2.6 Списочная форма
ListView клиентов должна отображаться в дашбордах инструкторов, тренеров, менеджеров в окне "Клиенты".
Отображаемые поля:
• Фото клиента. При выборе поля открывается дашборд клиента.
• Фамилия, Имя, Отчество. При выборе поля открывается дашборд клиента.
• Занятие ближайшее. При выборе поля открывается дашборд занятия
• Инфо.
Поле Инфо представляет собой строку информации о ближайшем занятии клиента в зависимости от значения hourNotification клиента:
• Текущее время меньше разницы времени начала ближайшего занятия и hourNotification:
отображается строка: "До занятия " + (разница времени начала ближайшего занятия и текущего) + " час."
• Текущее время в пределах разницы времени начала ближайшего занятия и hourNotification:
отображается строка на желтом фоне: "До занятия " + (разница времени начала ближайшего занятия и текущего) + " час."
• Текущее время больше времени начала ближайшего занятия и меньше времени окончания занятия:
      отображается строка на зеленом фоне: "Идет занятие".
   Функционал поля Инфо является задачей бэкенд-API с периодом 1 минута.
2.7 Дашборд "Клиент"
Дашборд "Клиент" должен быть доступен как клиенту, так и всем остальным ролям при открытии дашборда из списка клиентов.
Обозначение: ClientDashboard.
Дашборд должен включать следующие виджеты:
1. Виджет "Следующая тренировка":
o Отображает информацию о ближайшем предстоящем занятии.
o Включает динамический обратный отсчет до начала занятия.
o Содержит кнопку-ссылку для перехода к деталям занятия.
2. Виджет "Прогресс тренировок":
o Отображает общую статистику: количество завершенных занятий за период, общее количество сожженных калорий, процент посещаемости.
o Визуализирует данные с помощью индикаторов выполнения (progress bar) и компактных графиков активности.
3. Виджет "Прогресс по цели":
o Отображает текущую цель клиента (напр., целевой вес).
o Показывает прогресс в достижении цели в виде численных индикаторов и тренда на мини-графике.
o Отображает средний недельный дефицит или профицит калорий.
4. Виджет "Достижения":
o В геймифицированном виде отображает последние полученные клиентом достижения.
o Представляет собой сетку иконок с кратким описанием.
5. Быстрое меню: Доступ к основным разделам ("Занятия", "Учет калорий") должен быть реализован в виде панели быстрого доступа или виджетов-карточек на самом дашборде.
Примечание: Виджеты должны быть адаптивными и перестраиваться в зависимости от размера экрана устройства. Порядок и наличие виджетов можно настроить.

Меню дашборда:
• Главное. Экран дашборда.
• Профиль. Экран с личной информацией.
• Мой тренер.
• Мой инструктор (при включенном roleInstructor из файла настройки).
• Мой менеджер (при включенном roleManager из файла настройки).
• Антропометрия.
• Занятия.
• Учет калорий (при включенном trackCalories из таблицы client).
• Прогресс.
• Инфо (доступно всем ролям, кроме Клиента).

2.7.1 Экран "Мой тренер"
Содержит фото тренера, полное ФИО, телефон, фрейм чата.

2.7.2 Экран "Мой инструктор"
Содержит фото инструктора, полное ФИО, телефон, фрейм чата.

2.7.3 Экран "Мой менеджер"
Содержит фото менеджера, полное ФИО, телефон, фрейм чата.
  
2.7.4 Экран "Антропометрия"
Состоит из:
• Виджета вверху по центру с данными из таблицы anthropometry_fix.
• 2-х одинаковых виджетов "Начало" и "Окончание", расположенных горизонтально, с данными из таблиц anthropometry_start и anthropometry_finish.
• В каждом виджете кнопка "Редактировать" переводит данные в режим редактирования. Кнопка "Редактировать" видна всем, кроме роли клиента.
• Кнопка "Сохранить" появляется после активации редактирования. После сохранения - возврат в режим просмотра.
• В виджетах "Начало" и "Окончание" имеется виджет "Индекс здоровья WHtR".  WHtR рассчитывается, как рост/обхват талии. Индекс рассчитывается с поправкой на возраст:
• Возраст до 25 – поправка 0.
• Возраст до 40 – поправка 0.02.
• Возраст до 60 – поправка 0.04.
• Возраст после 60 – поправка 0.05.
Виджет представляет собой линейный прогресс-бар с разметкой:
• Зеленая зона (0.45 - 0.55): "Норма, риск низкий"
• Желтая/Оранжевая зона (0.55 - 0.6): "Повышенный риск ожирения"
• Желтая/Оранжевая зона (0.4 - 0.45): "Повышенный риск истощения"
• Красная зона (>0.6): "Высокий риск ожирения"
• Красная зона (<0.4): "Высокий риск истощения"
• В окне расположена кнопка "Сравнение по фото". После нажатия открывается экран "Сравнение по фото" с двумя виджетами с заголовками "Начало" и "Окончание", выровненными по горизонтали. В каждом виджете имеется фрейм для показа фото, поле даты и кнопка "Загрузить фото". Кнопка видна всем, кроме роли клиента. По кнопке загружается фото из выбранной папки, с указанием даты/времени создании фото, если имеется, если нет, то даты/времени загрузки. При отображении обоих фото появляется кнопка "Сравнить". По кнопке запускается функция "Сравнить".
Функция "Сравнить":
• При нажатии кнопки "Сравнить" система открывает полноэкранный режим для визуального сравнения фотографий "до" и "после".
• Реализовать режим "Слайдер" (split-view), позволяющий пользователю интерактивно перекрывать одно изображение другим для наглядной оценки изменений.
• На втором этапе разработки рассмотреть возможность добавления функционала ручной разметки ключевых точек на фотографиях для автоматического расчета и сравнения объемов тела.
• Технологии автоматического замера объемов с помощью Computer Vision (AI) являются опциональными и требуют отдельного технико-экономического обоснования.

2.7.5 Экран "Биоимпеданс"
Состоит из 2-х одинаковых фреймов "Начало" и "Окончание", расположенных горизонтально, с ListView таблиц bioimpedance_start и bioimpedance_finish.

2.7.6 Экран "Занятия"
Экран содержит ListView "Lessons" c расписанием занятий.
Поля:
• № занятия.
• Наименование набора упражнений.
• Начало занятия план.
• Конец занятия план.
• Начало занятия факт. 
• Конец занятия факт.
• Длительность.
• Инструктор.
• Тренер.
• Выполнение.
• Примечание.
Логика отображения:
• Если у клиента есть активные занятия в расписании: отображается таблица с расписанием.
• Если активных занятий нет: таблица скрывается. Вместо нее отображается виджет с текстом: "Вам еще не назначены занятия. Заполните, пожалуйста, предпочтения по времени." и кнопка "Заполнить предпочтения".
Логика кнопки "Заполнить предпочтения":
• При нажатии открывается окно "Предпочтения по расписанию" ClientPreferenceSchedule.
После тапа-клика строки ListView "Lessons", открывается карточка "Занятие". Редактирование полей карточки возможно только последней записи.
Экран содержит кнопку "Создать", после чего создается запись в таблице lessons на основе расписания и открывается карточка "Занятие".
Карточка "Занятие"
Поля:
• № занятия (недоступно).
• Наименование набора упражнений (недоступно).
• Начало занятия план (недоступно).
• Конец занятия план (недоступно).
• Начало занятия факт. 
• Конец занятия факт.
• Длительность (недоступно).
• Инструктор.
• Тренер.
• Выполнение.
• Примечание.

Примечания:

По умолчанию поля Начало занятия факт = Начало занятия план, Конец занятия факт = Конец занятия план, и их можно изменить.
Длительность рассчитывается после обновления поля "Выполнение".
По умолчанию поле Выполнение пустое. Поле Выполнение выбирается из
enum CompleteLesson {completed, postponed, canceled, frozen} (выполнено, перенесено, отменено, заморожено). В случае выбора из последних двух, открывается inputBox для обязательного ввода примечания. Нельзя сохранить запись с пустым полем Выполнение.

В полях Инструктор и Тренер можно выбрать из выпадающего списка произвольного инструктора и тренера.


2.7.7 Экран "Предпочтения по расписанию"
Класс ClientPreferenceSchedule.
• Форма загружает данные из таблицы work_schedules.
• Для каждого рабочего дня недели (is_day_off = false) отображается строка с:
• Наименованием дня недели.
• Диапазоном доступного времени (взят из work_schedules для этого дня). Например: "Понедельник (доступно с 09:00 до 20:00)". (минус 1 час на последнее занятие: end_time - 1h).
• Полями для ввода или выбором времени (TimePicker) "Желаемое время начала" и "Желаемое время окончания" в пределах доступного диапазона.
• Клиент может заполнить предпочтения для одного или нескольких дней.
• Кнопки "Сохранить" и "Отмена".

2.7.8 Экран "Учет калорий"
Экран представляет собой дашборд, включающий ListView "Таблица учета калорий".
Редактирование разрешено только последней записи.
Поля ListView:
№ занятия (недоступно).
Наименование набора упражнений (недоступно).
Начало занятия факт (недоступно).
Длительность (недоступно).
Входящий вес (in-line). 
Полученные калории (in-line). 
Затраченные калории (недоступно).

Примечания:
Клиент, после создания занятия, вводит свой вес и полученные калории в последнюю запись в режиме in-line. Полученные калории рассчитываются за время в часах, прошедшее с окончания предыдущего занятия до начала текущего. После ввода калорий рассчитывается поле "Затраченные калории" по формуле
Затраченные калории = (BMR / 24 * coeffActivity * ΔT) + calories_out
где:
• BMR - Основной обмен веществ (ккал/день).
• 24 - количество часов в сутках.
• coeffActivity - Коэффициент активности.
• ΔT (Delta T) - Время в часах между занятиями, прошедшее с окончания предыдущего занятия до начала текущего.
• calories_out - Расход на занятии. Рассчитывается как сумма caloriesOut всех упражнений в плане, скорректированная на длительность и интенсивность.
Если занятие первое, то клиент вводит полученные калории за последние сутки и рассчитывается за последние сутки.
Пример 1: Тренировки день через день (короткий интервал)
• Данные:
o BMR = 1600 ккал/день
o coeffActivity = 1.55
o Предыдущее занятие закончилось вчера в 19:00.
o Текущее занятие началось сегодня в 10:00.
o ΔT = 15 часов (с 19:00 до 10:00 следующего дня).
o Расход на занятии = 350 ккал.
• Расчет:
1. Часовой BMR: 1600 / 24 ≈ 66.67 ккал/час
2. Расход за период между тренировками: 66.67 ккал/час * 1.55 * 15 часов ≈ 1550 ккал
3. Общий расход: 1550 ккал + 350 ккал = 1900 ккал
Пример 2: Тренировки 2 раза в неделю (длинный интервал)
• Данные:
o ΔT = 3 дня = 72 часа (с понедельника 19:00 до четверга 19:00).
o Расход на занятии = 400 ккал.
• Расчет:
1. Расход за период: 66.67 ккал/час * 1.55 * 72 часа ≈ 7440 ккал
2. Общий расход: 7440 ккал + 400 ккал = 7840 ккал
Расчет затраченных калорий на занятии является задачей бэкенд-API.

2.7.9 Экран "Прогресс"

Комплекс визуализации прогресса должен включать:
• График зависимости веса и калорий.
• График дефицита/профицита калорий.
• Индикаторы и KPI.
• Выводы системы рекомендаций.
• Интерактивные элементы.
• Адаптивный дизайн.
• Интеграция с планами тренировок.

3 Функциональный модуль "Инструктор"
3.1  Списочная форма
ListView инструкторов должна отображаться в дашбордах тренера, менеджера в окне "Инструкторы".


3.2  Дашборд "Инструктор"
Дашборд должен быть доступен как инструктору, так и тренеру, и менеджеру, и администратору.
Обозначение: InstructorDashboard.
Меню дашборда:
• Главное. Экран дашборда.
• Профиль. Экран с личной информацией.
• Клиенты
• Мой тренер.
• Мой менеджер (при включенном roleManager из файла настройки).
• Расписание.
• Табель.
• Подменю каталогов, только просмотр. 
• Инфо.

3.2.1 Экран "Клиенты"
Содержит ListView привязанных клиентов, фрейм группового чата. При выборе клиента открывается дашборд клиента.
3.2.2 Экран "Мой тренер"
Содержит фото тренера, полное ФИО, телефон, фрейм чата.
3.2.3 Экран "Мой менеджер"
Содержит фото менеджера, полное ФИО, телефон, фрейм чата.
3.2.4 Экран "Расписание"
Экран содержит персональное расписание инструктора.
3.2.5 Экран "Табель"
Экран содержит дашборд "Табель" в одиночном режиме.


4 Функциональный модуль "Тренер"
4.1 Списочная форма
ListView тренеров должна отображаться в дашборде менеджера, в окне "Тренеры". 
4.2 Дашборд "Тренер"
Дашборд должен быть доступен как тренеру, так и менеджеру, и администратору.
Обозначение: TrainerDashboard.
Меню дашборда:
• Главное. Экран дашборда.
• Профиль. Экран с личной информацией.
• Клиенты.
• Мой менеджер (при включенном roleManager из файла настройки).
• Расписание.
• Табель.
• Подменю каталогов. Тренер может создавать/редактировать только шаблоны упражнений и планов, все остальное – только просмотр.
• Инфо.

4.2.1 Экран "Клиенты"
Содержит ListView привязанных клиентов, фрейм группового чата. При выборе клиента открывается дашборд клиента.
4.2.2 Экран "Инструкторы"
Содержит ListView привязанных инструкторов, фрейм группового чата. При выборе инструктора открывается дашборд инструктора.
4.2.3 Экран "Мой менеджер"
Содержит фото менеджера, полное ФИО, телефон, фрейм чата.
4.2.4 Экран "Расписание"
Экран содержит персональное расписание тренера.
4.2.5 Экран "Табель"
Экран содержит дашборд "Табель" в одиночном режиме.


5 Функциональный модуль "Менеджер"
5.1 Дашборд "Менеджер"
Дашборд должен быть доступен как менеджеру, так и администратору.
Обозначение: ManagerDashboard.
Меню дашборда:
• Главное. Экран дашборда.
• Профиль. Экран с личной информацией.
• Клиенты
• Расписание.
• Табели.
• Подменю каталогов. Доступны для создания/редактирования записей всех каталогов, кроме "Расписание работы центра" и Дежурства сотрудников, они только для просмотра.

5.1.1 Экран "Клиенты"
Содержит ListView привязанных клиентов, фрейм группового чата. При выборе клиента открывается дашборд клиента.
5.1.2 Экран "Инструкторы"
Содержит ListView привязанных инструкторов, фрейм группового чата. При выборе инструктора открывается дашборд инструктора.
5.1.3 Экран "Тренеры"
Содержит ListView привязанных тренеров, фрейм группового чата. При выборе тренера открывается дашборд тренера.
5.1.4 Экран "Расписание"
Содержит все виды расписаний занятий, с выборкой по тренеру, инструктору, клиенту.
Содержит функционал составления общего расписания, обновления по клиенту.

5.1.5 Экран "Табели"
Экран содержит дашборд "Табель" в групповом режиме.
6 Каталоги (Catalogs)
• Все каталоги должны иметь списочную форму и карточку или дашборд. В списке должна быть панель с элементами управления: создание, клонирование, сохранение, удаление, поиск. В карточке аналогично должна быть панель элементов (без поиска), а также возможность изменения, удаления, выбора полей сущности.
• Если действия (создание, сохранение и т.д.) требуют внутреннюю логику, обращение к нескольким таблицам, то создавать отдельные команды.
• В списочной форме чек-бокс "Показать архивные" добавляет фильтр archived_at IS NOT NULL. Архивные строки выделяются серым фоном.
• Все таблицы каталогов должны иметь поле замечаний: note (VARCHAR(100));
• Работа со каталогами в полном объеме (CRUD) доступна ролям "Администратор" и "Менеджер". Роль "Тренер" имеет разрешение создавать записи, изменять и удалять. Изменять и удалять записи может только свои. Роль "Инструктор" имеет разрешение на просмотр и переход. Роли "Клиент" каталоги недоступны.

6.1 Каталог "Виды активности клиента "
Необходим для определения коэффициента активности для расчета калорийности BMR. 
Таблица kinds_activity_client
Поля:
• name (VARCHAR(100));
• coeffActivity (REAL); //Коэффициент активности.

6.2 Каталог "Уровни фитнес-подготовки"
Необходим для сопоставления с планами тренировок. 
Таблица levels_training
Поля:
• name (VARCHAR(20));

Класс LevelTrainingCatalog
Поля:
• name.

Списочная форма
Заголовок: Уровни фитнес-подготовки
Отображаемые поля: 
• Наименование (name).

6.3 Каталог "Цели тренировок"
Таблица goals_training
Поля:
• name (VARCHAR(20));
Класс GoalTrainingCatalog
Поля:
• name.

Списочная форма
Заголовок: Цели тренировок
Отображаемые поля: 
• Наименование (name).

6.4 Каталог "Виды Упражнений"
Таблица kinds_exercis
Поля:
• name (VARCHAR(100));
Класс KindExercisCatalog
Поля:
• name;

   Списочная форма
      Заголовок: Виды упражнений
      Отображаемые поля: Наименование (name).
   Карточка
      Заголовок: Вид упражнения
      Отображаемые поля: Наименование (name).
      
6.5 Каталог "Типы Упражнений"
Таблица types_exercis
Поля:
• name (VARCHAR(100));
• kind_exercis_id (BIGINT);
• equipment_type_id (BIGINT);


Класс TypeExercisCatalog
Поля:
• name;
• kindExercis;
• typeEquip;
   Списочная форма
      Заголовок: Типы упражнений
Отображаемые поля:
• Наименование (name)
• Вид упражнения (kindExercis.name)
• Фото оборудования (typeEquip.photo).
   Карточка
      Заголовок: Тип упражнения
Отображаемые поля:
• Наименование (name)
• Вид упражнения (kindExercis.name)
• Фото оборудования (typeEquip.photo).
К полю kindExercis.name привязана кнопка с действием выбора вида упражнения из списка в popup-окне.

6.6 Каталог "Упражнения"
Таблица exercises_templates
Поля:
• name (VARCHAR(100));
• repeatQty (INT);
• duration_exec (REAL);
• duration_rest (REAL);
• caloriesOut (REAL);
• is_group (BOOL, false);
• type_exercis_id (BIGINT);
Класс ExercisCatalog
Поля:
• name;
• repeatQty; //nullable (Количество повторов).
• durationExec; //Длительность проведения в минутах.
• durationRest; //Длительность отдыха после упражнения в минутах.
• caloriesOut; //Расход калорий в кал.
• isGroup; //Групповое упражнение.
• typeExercis; //Тип.

   Списочная форма
      Заголовок: Упражнения - шаблон
Отображаемые поля: 
• Фото (typeExercis.typeEquip.photo).
• Наименование (name).
• Количество повторов (repeatQty).
• Время проведения (durationExec).
• Время отдыха (durationRest).
• Расход калорий в калориях (caloriesOut).
• Групповое (isGroup).
   Карточка
      Заголовок: Упражнение - шаблон
Отображаемые поля: 
• Фото (typeExercis.typeEquip.photo).
• Наименование (name).
• Количество повторов (repeatQty).
• Время проведения (durationExec).
• Время отдыха (durationRest).
• Расход калорий в калориях (caloriesOut).
• Групповое (isGroup).

6.7 Каталог "Набор упражнений"
Таблица sets_exercises_templates
Поля:
• name (VARCHAR(100));
• level_training_id; //уровень фитнес-подготовки

Таблица отношений "Набор упражнений - Упражнения"
Обозначение: set_exercises_templates_exercis_templates
Поля: set_exercises_template_id, exercis_template_id.


Класс SetExercisCatalog
Поля:
• name;
• exercisQty (int); //расчетное, кол-во упражнений.
• durationExecSum (double); //расчетное, длительность проведения всех упражнений.
• durationRestSum(double); //расчетное, длительность отдыха упражнений.
• durationSum(double); //расчетное, durationExecSum + durationRestSum.
• caloriesOutSum (double); //расчетное, расходуемые калории. 

   Списочная форма
      Заголовок: Наборы упражнений - шаблон
Отображаемые поля: 
• Наименование (name).
• Уровень подготовки (level_training_id).
• Количество (exercisQty).
• Длительность упражнений (durationExec).
• Отдых (durationRestSum).
• Длительность набора (durationSum).
• Расход калорий (caloriesOutSum).

 Дашборд
 Заголовок: Набор упражнений - шаблон
 Отображаемые поля: 
• Наименование (name).
• Уровень подготовки (level_training_id).
• Количество (exercisQty).
• Длительность упражнений (durationExec).
• Длительность отдыха между упражнениями(durationRestSum).
• Длительность набора упражнений (durationSum).
• Расход калорий (caloriesOutSum).
Элемент дашборда представляет собой фрейм с наименованием "Упражнения". Во фрейме сверху размещается панель инструментов с активной кнопкой "Добавить" и неактивной кнопкой "Удалить".  Так же находится список упражнений, привязанный к данному набору. При выделении строки из списка, кнопка "Удалить" становится активной.
При нажатии на кнопку "Добавить" отображается popup-окно со списком всех упражнений, с неактивной кнопкой "Ок" и активной кнопкой "Отмена". По кнопке "Отмена", окно закрывается. При выделении строки из списка упражнений, кнопка "Ок" становится активной. По кнопке "Ок", окно закрывается и выбранное упражнение добавляется к списку упражнений.
При нажатии на кнопку "Удалить" удаляется id выбранного упражнения по id набора упражнений из таблицы set_exercises_exercis.
После изменения списка упражнений, все поля должны обновиться.

6.8 Каталог "Планы тренировок"
Каталог имеет записи плана тренировок – наборы упражнений в отношении один ко многим.
Таблица training_plan_templates
Поля:
• name (VARCHAR(100));
• goal_training_id (BIGINT). //из таблицы Цели тренировок

Таблица отношений "Планы тренировок – Наборы упражнений"
Обозначение: training_plan__templates_set_exercises_templates
Поля: training_plan_template_id, set_exercises_template_id.

Класс TrainingPlanCatalog
Поля:
• name;
• kindTrainingPlan; //вид плана тренировок.
• setExercisQty (int); //расчетное, кол-во наборов упражнений.
• exercisQty (int); //расчетное, кол-во упражнений.
• durationExecSum (double); //расчетное, длительность всех упражнений.
• durationRestSum(double); //расчетное, длительность отдыха упражнений.
• durationSum(double); //расчетное, durationExecSum + durationRestSum.
• caloriesOutSum (double); //расчетное, расходуемые калории. 
   Списочная форма
      Заголовок: Планы тренировок – шаблон
      Отображаемые поля: 
• Наименование (name).
• Вид плана тренировок (kindTrainingPlan.name).
• Длительность упражнений (durationExec).
• Длительность отдыха между упражнениями (durationRestSum).
• Длительность набора упражнений (durationSum).
• Расход калорий (caloriesOutSum).
   Дашборд
      Заголовок: План тренировок - шаблон
      Отображаемые поля: 
• Наименование (name).
• Вид плана тренировок (kindTrainingPlan.name).
• Длительность упражнений (durationExec).
• Длительность отдыха между упражнениями (durationRestSum).
• Длительность набора упражнений (durationSum).
• Расход калорий (caloriesOutSum).
Элемент дашборда представляет собой фрейм с наименованием "Наборы упражнений". Во фрейме сверху размещается панель инструментов с активной кнопкой "Добавить" и неактивной кнопкой "Удалить".  Так же находится список наборов упражнений, привязанный к данному плану. При выделении строки из списка, кнопка "Удалить" становится активной.
При нажатии на кнопку "Добавить" отображается popup-окно со списком всех наборов упражнений, с неактивной кнопкой "Ок" и активной кнопкой "Отмена". По кнопке "Отмена", окно закрывается. При выделении строки из списка упражнений, кнопка "Ок" становится активной. По кнопке "Ок", окно закрывается и выбранный набор упражнений добавляется к списку.
При нажатии на кнопку "Удалить" удаляется id выбранного набора упражнений по id плана из таблицы training_plan_set_exercises.  
После изменения списка упражнений, все поля должны обновиться.

6.9 Каталог "Заявки (Лид-менеджмент)"
Таблица onboarding_client
   Поля:
• first_name (VARCHAR(100));//Имя
• last_name (VARCHAR(100));//Фамилия
• middle_name (VARCHAR(100); //Отчество
• gender (VARCHAR(20)); //'М', 'Ж'
• age (int); //Возраст
• phone (VARCHAR(20));  //Телефон
• email (VARCHAR(100);  //E-mail
• feedback_method (VARCHAR(20));  //способ обратной связи: 'телефон' или 'почта'
• is_contact_on_website (bool); //по умолчанию – false, признак холодного контакта клиента через вебсайт
• is_client_build (bool); //признак, что на основе записи создан клиент
• client_build_at (TIMESTAMP); //дата-время создания клиента


Класс OnboardingClientCatalog
   Поля:
• firstName (string);//Имя
• lastName (string);//Фамилия
• middleName (string); //Отчество
• gender (string); //'М', 'Ж'
• age (int); //Возраст
• phone (string);  //Телефон
• email (string);  //E-mail
• feedbackMethod(string); //способ обратной связи: 'телефон' или 'почта'
• isContactOnWebsite (bool); //признак холодного контакта клиента через вебсайт
• isClientBuild (bool); //признак создания клиента
• clientBuildAt (datetime); // дата-время создания клиента
• archived_at (Timestamp)
• archived_by (BIGINT)
• note (VARCHAR(100)); //примечание


Списочная форма
Заголовок: Заявки (Лид-менеджмент)
Отображаемые поля: 
• Имя (firstName)
• Фамилия (lastName)
• Отчество (middleName)
• Пол (gender)
• Возраст (age)
• Телефон (phone)
• E-mail (email)
• Cпособ обратной связи (feedbackMethod)
• Активное (isActive)
Форма содержит панель инструментов с поиском по имени, фамилии, телефону, почте. Так же содержит чекбокс по полю isActive, по умолчанию true.
Карточка
Заголовок: Заявка (Лид-менеджмент)
Отображаемые поля:
• Имя (firstName)
• Фамилия (lastName)
• Отчество (kindEquip.name)
• Пол (gender)
• Возраст (age)
• Телефон (phone)
• E-mail (email)
• Зашел через сайт (isContactOnWebsite)
• Cпособ обратной связи (feedbackМethod)
• Активное (isActive)
• Примечание менеджера (note)

Обязательность полей при создании записи: 
• firstName;
• gender;
• age;
• phone или email. Обязательное хотя бы одно из двух.
Карточка содержит кнопку "Создать клиента", которая вызывает функцию-команду создания клиента. При успешном создании, заполняются поля isClientBuild, ClientBuildAt и isActive.

6.10 Каталог "Расписание работы центра"
Таблица work_schedules
Поля:
• day_of_week (Integer, NOT NULL, UNIQUE). День недели: 1 (Понедельник) - 7 (Воскресенье).
• start_time (Time, NOT NULL). Время начала работы (например, 09:00).
• end_time (Time, NOT NULL). Время окончания работы (например, 21:00).
• is_day_off (Boolean, default: false). Флаг, указывающий, что этот день недели по умолчанию нерабочий (например, Воскресенье).

Класс WorkSchedule
Поля:
• dayOfWeek;
• startTime;
• endTime;
• IsDayOff


6.11 Каталог "Дежурства сотрудников"
Каталог имеет записи дежурства сотрудников по центру.
Таблица employees_duty
Поля:
• user_id(BIGINT). //из таблицы users
• duty_start_at (TIMESTAMP); //время начала дежурства
• duty_finish_at (TIMESTAMP); //время окончания дежурства

Класс EmployeeDuty
Поля:
• userId; //сотрудник
• dutyManagerStartAt (DateTime); //время начала дежурства
• dutyManagerFinishAt (DateTime); //время окончания дежурства
   Списочная форма
      Заголовок: "Дежурства сотрудников"
      Отображаемые поля: 
• ФИО (userId).
• Время начала (dutyManagerStartAt).
• Время окончания (dutyManagerFinishAt).
   Дашборд
      Заголовок: "Дежурство сотрудника" + ФИО
      Отображаемые элементы: 
• ФИО (userId).
• ListView по userId с полями Время начала, Время окончания.

6.12 Каталог "Квалификации"
Каталог имеет записи квалификаций тренеров и инструкторов.
Таблица employees_qualifications
Поля:
• user_id (BIGINT); //из таблицы users
• education_level (SMALLINT); //enum employeeEducation ('высшее', 'среднее', 'курсы')
• specialization (SMALLINT); //enum employeeSpec ('фитнес', 'йога', 'реабилитация')
• qualification_date (TIMESTAMP); //дата присвоения квалификации
• education_document (URL); //скан диплома/сертификата


Класс employeeQualification
Поля:
• userId; //сотрудник
• educationLevel (Enum); //enum employeeEducation 
• specialization (Enum); //enum employeeSpec
• qualificationDate (DateTime);
• educationDocument (Image); //скан документа  
   Списочная форма
      Заголовок: "Квалификации"
      Отображаемые поля: 
• ФИО (userId);
• Уровень (educationLevel );
• Специализация (specialization);
• Дата квалификации (qualificationDate);
   Дашборд
      Заголовок: "Квалификация" + ФИО
      Отображаемые элементы: 
• ФИО (userId);
• Уровень (educationLevel );
• Специализация (specialization);
• Дата квалификации (qualificationDate);
• Скан (educationDocument);

• 



