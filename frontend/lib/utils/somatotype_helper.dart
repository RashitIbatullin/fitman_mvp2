String getSomatotypeHelpText(String? profile) {
  if (profile == null || profile == 'Недостаточно данных' || profile == 'Не удалось определить') {
    return 'Нет данных для отображения справки. Введите обхват запястья и лодыжки, чтобы рассчитать соматотип.';
  }

  // Parse the profile string to find the dominant type
  String dominantType = '';
  int maxPercentage = 0;

  final parts = profile.split(', ');
  for (final part in parts) {
    final typeAndPercentage = part.split(': ');
    if (typeAndPercentage.length == 2) {
      final percentage = int.tryParse(typeAndPercentage[1].replaceAll('%', ''));
      if (percentage != null && percentage > maxPercentage) {
        maxPercentage = percentage;
        dominantType = typeAndPercentage[0];
      }
    }
  }

  switch (dominantType) {
    case 'Эктоморф':
      return '''
      **Эктоморф: Характеристики и рекомендации**

      **Характеристики:**
      - Худощавое телосложение, тонкие кости, узкие плечи.
      - Ускоренный метаболизм, сложно набирать мышечную и жировую массу.
      - Длинные конечности.

      **Рекомендации по тренировкам:**
      - **Акцент:** Базовые силовые упражнения с большими весами (приседания, становая тяга, жим лежа).
      - **Интенсивность:** Высокая, с 8-12 повторениями в 3-4 подходах.
      - **Частота:** 3-4 раза в неделю с достаточным временем на восстановление.
      - **Кардио:** Минимальное, чтобы не сжигать лишние калории, необходимые для роста.

      **Рекомендации по питанию:**
      - **Калории:** Высококалорийный рацион с профицитом энергии.
      - **Углеводы:** Повышенное потребление сложных углеводов (55-65%).
      - **Питание:** 5-7 приемов пищи в день, включая перекусы.
      ''';
    case 'Мезоморф':
      return '''
      **Мезоморф: Характеристики и рекомендации**

      **Характеристики:**
      - Атлетическое телосложение, хорошо развитая мускулатура.
      - Широкие плечи, узкая талия.
      - Легко набирает мышечную массу и быстро теряет жир.

      **Рекомендации по тренировкам:**
      - **Акцент:** Вариативность. Чередуйте тяжелые и легкие тренировки, меняйте упражнения.
      - **Интенсивность:** Хорошо откликается на суперсеты и интервальные тренировки (HIIT).
      - **Частота:** 3-4 силовые тренировки в неделю.
      - **Кардио:** Умеренное количество, 2-3 раза в неделю по 30 минут.

      **Рекомендации по питанию:**
      - **Баланс:** Сбалансированный рацион. Соотношение БЖУ примерно: 30% белки, 40% углеводы, 30% жиры.
      - **Белок:** Достаточное количество белка для роста и восстановления мышц.
      - **Контроль:** Следите за количеством потребляемых жиров.
      ''';
    case 'Эндоморф':
      return '''
      **Эндоморф: Характеристики и рекомендации**

      **Характеристики:**
      - Округлые формы, крупное телосложение, широкие кости.
      - Замедленный метаболизм, склонность к накоплению жира.
      - Жир часто откладывается в области живота и бедер.

      **Рекомендации по тренировкам:**
      - **Акцент:** Кардиотренировки высокой частоты (4-5 раз в неделю) для ускорения метаболизма.
      - **Интенсивность:** Силовые тренировки 3-4 раза в неделю с акцентом на комплексные упражнения.
      - **Активность:** Ведите активный образ жизни, добавляйте пешие прогулки, плавание.

      **Рекомендации по питанию:**
      - **Калории:** Умеренный дефицит калорий для снижения веса.
      - **Белок:** Высокое потребление белка (30-35%).
      - **Избегайте:** Простых сахаров, рафинированных углеводов и жирной пищи.
      ''';
    default:
      return 'Не удалось определить доминирующий тип телосложения для отображения справки.';
  }
}
